{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "Faceted Column Charts without Annotations, Labels, or Scales",
    "data": {
      "url": "https://raw.githubusercontent.com/yueherngtang/fit3179w10hw/refs/heads/master/expenditure_group_percentage_expenditure.csv"
    },
    "background": "transparent",
     "transform": [
        {
          "calculate": "format(datum.percentage_of_expenditure, '.1f') + '%' ",
          "as": "percentage_of_expenditure_percentage"
        }
  
     ],
    "facet": {
      "field": "year",
      "type": "ordinal",
      "header": {    
        "title": null      
      }
    },
    "spec": {
      "width":77,
      "height": 460,
      "layer": [
        {
            "mark": {
              "type": "text",
              "align": "left",
              "dx": 5,
              "dy": -3
            },
            "encoding": {
              "text": {
                "field": "expenditure_group",
                "type": "nominal"
              },
              "x": {
                "field": "percentage_of_expenditure",
                "type": "quantitative"
              },
              "y": {
                "field": "expenditure_group",
                "type": "nominal",
                "sort": {"field": "percentage_of_expenditure", "order": "descending"} 
              }
            },
            "transform": [
              {
                "filter": "datum.year == 2022"  
              }
            ]
          }
    
      ]
    },
    "config": {
      "facet": {
        "spacing": 80  
      },
      "view": {
        "stroke": null  
      }
    },
    "resolve": {
      "scale": {
        "x": "independent",  
        "y": "independent"
      }
    }
  }
  